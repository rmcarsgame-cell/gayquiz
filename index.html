<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Massive Food Preference Speedrun Quiz</title>
    <style>
        :root {
            --primary: #ff6b6b;
            --secondary: #4ecdc4;
            --color-c: #ffae42; 
            --color-d: #4c4c9d; 
            --color-e: #00b894; 
            --color-f: #a29bfe; 
            --bg: #f7f9fc;
            --text: #2d3436;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            user-select: none;
        }

        .container {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            width: 90%;
            max-width: 650px;
            text-align: center;
            position: relative;
        }

        h1 {
            color: var(--primary);
            margin-bottom: 1.5rem;
        }

        .question-box {
            margin-bottom: 2rem;
        }

        .question-text {
            font-size: 1.25rem;
            margin-bottom: 1.5rem;
            font-weight: 600;
            cursor: default;
        }

        /* --- Timer Styles --- */
        #timer-display {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--color-d);
            margin-bottom: 1rem;
            background: #eef;
            padding: 5px 10px;
            border-radius: 5px;
            border-bottom: 3px solid var(--color-d);
            display: inline-block;
        }

        #pb-display {
            color: #636e72;
            font-size: 0.9rem;
            margin-bottom: 1rem;
        }

        .options {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 1rem;
        }

        button {
            padding: 15px 10px;
            border: none;
            border-radius: 8px;
            font-size: 0.95rem;
            cursor: pointer;
            transition: transform 0.1s, opacity 0.2s;
            font-weight: bold;
            color: white;
            white-space: nowrap;
        }

        button:active {
            transform: scale(0.98);
        }

        .btn-a { background-color: var(--primary); }
        .btn-b { background-color: var(--secondary); }
        .btn-c { background-color: var(--color-c); }
        .btn-d { background-color: var(--color-d); }
        .btn-e { background-color: var(--color-e); }
        .btn-f { background-color: var(--color-f); }

        .btn-a:hover, .btn-b:hover, .btn-c:hover, .btn-d:hover, .btn-e:hover, .btn-f:hover {
            opacity: 0.9;
        }

        /* Result Styles */
        .hidden { display: none; }
        
        #result-container h2 {
            font-size: 2.5rem;
            color: var(--primary);
        }

        #result-description {
            font-size: 1.1rem;
            margin-top: 1rem;
            color: #636e72;
        }
        
        #time-result {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--color-e);
            margin: 1rem 0;
            border-bottom: 2px dashed #ccc;
            padding-bottom: 0.5rem;
        }

        .pb-beaten {
            color: var(--primary);
            font-weight: 900;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background-color: #eee;
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--secondary);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* --- Confetti Styles (Simple CSS Effect) --- */
        .confetti-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
            z-index: 10;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: var(--primary);
            opacity: 0;
            animation: fall 3s ease-in-out forwards;
        }

        @keyframes fall {
            0% { opacity: 1; transform: translateY(-100px) rotateZ(0deg); }
            100% { opacity: 0; transform: translateY(100vh) rotateZ(720deg); }
        }
    </style>
</head>
<body>

    <div class="container">
        <div id="confetti-effect" class="confetti-container hidden"></div>

        <div id="quiz-box">
            <div id="pb-display">Personal Best: Loading...</div>
            <div id="timer-display">00:00.00</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress"></div>
            </div>
            <h1>Food Personality Quiz (120 Questions)</h1>
            <div class="question-box">
                <p class="question-text" id="question" onclick="checkSecret()">Loading...</p>
                <div class="options">
                    <button class="btn-a" id="opt-a" onclick="handleAnswer()">Option A</button>
                    <button class="btn-b" id="opt-b" onclick="handleAnswer()">Option B</button>
                    <button class="btn-c" id="opt-c" onclick="handleAnswer()">Option C</button>
                    <button class="btn-d" id="opt-d" onclick="handleAnswer()">Option D</button>
                    <button class="btn-e" id="opt-e" onclick="handleAnswer()">Option E</button>
                    <button class="btn-f" id="opt-f" onclick="handleAnswer()">Option F</button>
                </div>
            </div>
        </div>

        <div id="result-container" class="hidden">
            <h1>The Results Are In</h1>
            <h2 id="result-percentage">Calculating...</h2>
            <div id="time-result"></div>
            <p id="result-description">Based on your sophisticated palate.</p>
            <br>
            <button onclick="location.reload()" style="background-color: #2d3436; width: 100%;">Try For a Faster PB</button>
        </div>
    </div>

    <script>
        // --- Quiz Data (Same 120 Questions, 6 Options) ---
        const questions = [
            { text: "Friday Night Dinner:", a: "Pizza", b: "Sushi", c: "Tacos", d: "Curry", e: "Steak", f: "Pasta" },
            { text: "Best Dessert:", a: "Ice Cream", b: "Chocolate Cake", c: "Cheesecake", d: "Tiramisu", e: "Fruit Salad", f: "Doughnuts" },
            { text: "Morning Drink:", a: "Hot Coffee", b: "Iced Latte", c: "Green Tea", d: "Black Tea", e: "Orange Juice", f: "Water" },
            { text: "Comfort Food:", a: "Mac & Cheese", b: "Tacos", c: "Chicken Soup", d: "Fried Rice", e: "Grilled Cheese", f: "Ramen" },
            { text: "Movie Snack:", a: "Popcorn", b: "Candy", c: "Nachos", d: "Pretzels", e: "Chocolate Bar", f: "Grapes" },
            { text: "Fruit Preference:", a: "Apples", b: "Oranges", c: "Bananas", d: "Grapes", e: "Pears", f: "Kiwi" },
            { text: "Spicy or Mild:", a: "Very Spicy", b: "Medium Heat", c: "Slightly Spicy", d: "Totally Mild", e: "Sweet Heat", f: "Just Flavor" },
            { text: "Soup or Salad:", a: "Hearty Soup", b: "Light Salad", c: "Gazpacho", d: "Chowder", e: "Caesar Salad", f: "Side Soup" },
            { text: "Cooking Method:", a: "Grill", b: "Bake", c: "Fry", d: "Roast", e: "Steam", f: "Smoke" },
            { text: "Type of Bread:", a: "Sourdough", b: "Rye", c: "Ciabatta", d: "Baguette", e: "Whole Wheat", f: "Pita" },
            { text: "Favorite Sauce:", a: "Ketchup", b: "Mustard", c: "Salsa", d: "Hot Sauce", e: "Mayonnaise", f: "BBQ Sauce" },
            { text: "Sweetener:", a: "Sugar", b: "Honey", c: "Agave", d: "Stevia", e: "Maple Syrup", f: "Brown Sugar" },
            { text: "Potato Style:", a: "Fries", b: "Mashed", c: "Baked", d: "Roasted", e: "Wedges", f: "Hashed" },
            { text: "Cheese Type:", a: "Cheddar", b: "Mozzarella", c: "Swiss", d: "Goat Cheese", e: "Blue Cheese", f: "Provolone" },
            { text: "Snack Time:", a: "Chips", b: "Nuts", c: "Crackers", d: "Fruit", e: "Yogurt", f: "Cookies" },
            { text: "Type of Tea:", a: "Black Tea", b: "Green Tea", c: "Herbal (Mint)", d: "Herbal (Berry)", e: "Oolong", f: "White Tea" },
            { text: "Protein:", a: "Chicken", b: "Beef", c: "Pork", d: "Tofu", e: "Lamb", f: "Fish" },
            { text: "Vegetable:", a: "Carrots", b: "Broccoli", c: "Asparagus", d: "Peppers", e: "Mushrooms", f: "Spinach" },
            { text: "Breakfast:", a: "Pancakes", b: "Waffles", c: "Oatmeal", d: "Eggs", e: "Cereal", f: "Toast" },
            { text: "Seasoning:", a: "Salt", b: "Pepper", c: "Garlic Powder", d: "Onion Powder", e: "Paprika", f: "Cumin" },
            { text: "Drink Mixer:", a: "Soda", b: "Juice", c: "Tonic", d: "Ginger Ale", e: "Lemonade", f: "Seltzer" },
            { text: "Italian:", a: "Lasagna", b: "Spaghetti", c: "Ravioli", d: "Gnocchi", e: "Fettuccine", f: "Pizza" },
            { text: "Sandwich Fill:", a: "Ham", b: "Turkey", c: "Roast Beef", d: "Veggie", e: "Pastrami", f: "Chicken Salad" },
            { text: "Milk:", a: "Whole Milk", b: "Skim Milk", c: "Almond Milk", d: "Oat Milk", e: "Soy Milk", f: "Lactose Free" },
            { text: "Berries:", a: "Strawberries", b: "Blueberries", c: "Raspberries", d: "Blackberries", e: "Cranberries", f: "Mix" },
            { text: "Candy:", a: "Gummies", b: "Hard Candy", c: "Chocolate", d: "Licorice", e: "Sour Candy", f: "Caramel" },
            { text: "Dressing:", a: "Ranch", b: "Vinaigrette", c: "Thousand Island", d: "Blue Cheese", e: "Honey Mustard", f: "Oil and Vinegar" },
            { text: "Dip:", a: "Guacamole", b: "Salsa", c: "Hummus", d: "Spinach Dip", e: "Queso", f: "Baba Ghanoush" },
            { text: "Herb:", a: "Basil", b: "Oregano", c: "Thyme", d: "Rosemary", e: "Cilantro", f: "Mint" },
            { text: "Exotic Fruit:", a: "Mango", b: "Pineapple", c: "Papaya", d: "Passion Fruit", e: "Lychee", f: "Guava" },
            { text: "Seafood:", a: "Shrimp", b: "Salmon", c: "Tuna", d: "Cod", e: "Scallops", f: "Crab" },
            { text: "Warm or Cold:", a: "Warm Drink", b: "Icy Cold Drink", c: "Room Temp Food", d: "Hot Food", e: "Chilled Dessert", f: "Warmed Snack" },
            { text: "Fast Food:", a: "Burger", b: "Taco", c: "Fried Chicken", d: "Sub Sandwich", e: "Pizza Slice", f: "Nuggets" },
            { text: "Sweet or Sour:", a: "Sweet", b: "Sour", c: "Salty", d: "Umami", e: "Bitter", f: "Balanced" },
            { text: "Vegetarian:", a: "Beans", b: "Tofu", c: "Lentils", d: "Tempeh", e: "Eggplant", f: "Seitan" },
            { text: "Grain:", a: "Rice", b: "Quinoa", c: "Couscous", d: "Bulgur", e: "Barley", f: "Farro" },
            { text: "Outdoor Meal:", a: "BBQ", b: "Picnic", c: "Campfire Cookout", d: "Patio Dinner", e: "Street Food", f: "Food Truck" },
            { text: "Dessert Base:", a: "Cookie", b: "Brownie", c: "Cake", d: "Pie", e: "Pudding", f: "Mousse" },
            { text: "Condiment:", a: "Mayonnaise", b: "Aioli", c: "Relish", d: "Pickles", e: "Chutney", f: "Horseradish" },
            { text: "Nut:", a: "Peanut", b: "Almond", c: "Walnut", d: "Pecan", e: "Cashew", f: "Pistachio" },
            { text: "Soup Base:", a: "Creamy", b: "Brothy", c: "Tomato Base", d: "Bean Base", e: "Vegetable Base", f: "Noodle Base" },
            { text: "Baking:", a: "Muffin", b: "Scone", c: "Loaf Cake", d: "Biscotti", e: "Croissant", f: "Danish" },
            { text: "Cocktail:", a: "Margarita", b: "Mojito", c: "Old Fashioned", d: "Martini", e: "Daiquiri", f: "Gin & Tonic" },
            { text: "Type of Oil:", a: "Olive Oil", b: "Canola Oil", c: "Vegetable Oil", d: "Coconut Oil", e: "Sesame Oil", f: "Avocado Oil" },
            { text: "Cheesy Dish:", a: "Quesadilla", b: "Grilled Cheese", c: "Fondue", d: "Cheese Fries", e: "Lasagna", f: "Poutine" },
            { text: "Sauce Consistency:", a: "Thick & Rich", b: "Thin & Light", c: "Smooth", d: "Chunky", e: "Very Fluid", f: "Pasty" },
            { text: "Root Vegetable:", a: "Sweet Potato", b: "Regular Potato", c: "Carrot", d: "Beet", e: "Turnip", f: "Radish" },
            { text: "Cracker:", a: "Salty Cracker", b: "Plain Cracker", c: "Seed Cracker", d: "Water Cracker", e: "Cheese Cracker", f: "Wheat Cracker" },
            { text: "Cereal:", a: "Crunchy Cereal", b: "Soggy Cereal", c: "Oatmeal", d: "Grits", e: "Granola", f: "Puffed Cereal" },
            { text: "Pizza Crust:", a: "Thin Crust", b: "Thick Crust", c: "Stuffed Crust", d: "Deep Dish", e: "Neapolitan", f: "Flatbread" },
            { text: "Hot Dog Topping:", a: "Relish", b: "Onions", c: "Chili", d: "Sauerkraut", e: "Cheese", f: "Pickles" },
            { text: "Pasta Shape:", a: "Penne", b: "Fettuccine", c: "Rotini", d: "Farfalle", e: "Orecchiette", f: "Linguine" },
            { text: "Spice Level:", a: "No Spice", b: "Hint of Spice", c: "Medium Spice", d: "Hot", e: "Extreme", f: "Numbing" },
            { text: "Pie Filling:", a: "Apple Pie", b: "Cherry Pie", c: "Pecan Pie", d: "Lemon Meringue", e: "Key Lime", f: "Pumpkin" },
            { text: "Deli Meat:", a: "Salami", b: "Pastrami", c: "Bologna", d: "Capicola", e: "Mortadella", f: "Prosciutto" },
            { text: "Chocolate Bar:", a: "Milk Chocolate", b: "Dark Chocolate", c: "White Chocolate", d: "Nutty", e: "Crispy", f: "Caramel Filled" },
            { text: "Starchy Side:", a: "Bread Rolls", b: "Cornbread", c: "Polenta", d: "Grits", e: "Dinner Biscuits", f: "Baked Beans" },
            { text: "Citrus:", a: "Lemon", b: "Lime", c: "Grapefruit", d: "Orange", e: "Tangerine", f: "Pomelo" },
            { text: "Preparation:", a: "Steamed", b: "Fried", c: "Baked", d: "Braised", e: "Grilled", f: "Sautéed" },
            { text: "Candy Flavor:", a: "Mint", b: "Caramel", c: "Vanilla", d: "Fruity", e: "Chocolate", f: "Nutty" },
            { text: "Egg Style:", a: "Scrambled", b: "Fried", c: "Poached", d: "Hard-boiled", e: "Soft-boiled", f: "Omelette" },
            { text: "Garnish:", a: "Parsley", b: "Cilantro", c: "Green Onion", d: "Chives", e: "Dill", f: "Basil" },
            { text: "Jelly:", a: "Grape Jelly", b: "Strawberry Jam", c: "Orange Marmalade", d: "Apricot Jam", e: "Raspberry Preserves", f: "Apple Butter" },
            { text: "Coffee Add-in:", a: "Cream", b: "Syrup", c: "Sugar", d: "Cinnamon", e: "Milk", f: "Black" },
            { text: "Hard or Soft:", a: "Hard Taco Shell", b: "Soft Taco Shell", c: "Hard Pretzel", d: "Soft Pretzel", e: "Crisp Roll", f: "Soft Bun" },
            { text: "Asian Noodle:", a: "Ramen", b: "Pho", c: "Udon", d: "Soba", e: "Vermicelli", f: "Lo Mein" },
            { text: "Frozen Treat:", a: "Popsicle", b: "Gelato", c: "Sorbet", d: "Frozen Yogurt", e: "Ice Cream Sandwich", f: "Milkshake" },
            { text: "Pork Cut:", a: "Bacon", b: "Sausage", c: "Pork Chop", d: "Ribs", e: "Tenderloin", f: "Ham Hock" },
            { text: "Flavor Profile:", a: "Earthy", b: "Bright", c: "Rich", d: "Spicy", e: "Subtle", f: "Bold" },
            { text: "Bar Snack:", a: "Pretzels", b: "Peanuts", c: "Popcorn", d: "Chips", e: "Olives", f: "Chex Mix" },
            { text: "Vegetable Dip:", a: "Hummus", b: "French Onion", c: "Ranch", d: "Tzatziki", e: "Blue Cheese", f: "Vinaigrette" },
            { text: "Oatmeal Topping:", a: "Brown Sugar", b: "Fruit", c: "Nuts", d: "Cinnamon", e: "Maple Syrup", f: "Plain" },
            { text: "Wine Color:", a: "Red Wine", b: "White Wine", c: "Rosé", d: "Sparkling Red", e: "Sparkling White", f: "Port" },
            { text: "Crisp or Soft:", a: "Crisp Salad", b: "Soft Bread", c: "Crunchy Veggie", d: "Tender Meat", e: "Crispy Skin", f: "Soft Interior" },
            { text: "Sweet Bread:", a: "Cinnamon Roll", b: "Doughnut", c: "Sweet Muffin", d: "Banana Bread", e: "Brioche", f: "Coffee Cake" },
            { text: "Seafood Shellfish:", a: "Clams", b: "Oysters", c: "Mussels", d: "Lobster", e: "Crab", f: "Shrimp" },
            { text: "Cooking Fat:", a: "Butter", b: "Lard", c: "Ghee", d: "Coconut Oil", e: "Olive Oil", f: "Duck Fat" },
            { text: "Hot Sauce Base:", a: "Vinegar Base", b: "Pepper Base", c: "Fruit Base", d: "Smoky Base", e: "Garlic Base", f: "Tomato Base" },
            { text: "Party Food:", a: "Sliders", b: "Wings", c: "Meatballs", d: "Veggies & Dip", e: "Cheese Board", f: "Spring Rolls" },
            { text: "Chewy or Crunchy:", a: "Chewy Candy", b: "Crunchy Granola", c: "Soft Gummy", d: "Hard Nut", e: "Crisp Chip", f: "Tender Meat" },
            { text: "Juice Flavor:", a: "Orange Juice", b: "Apple Juice", c: "Grape Juice", d: "Cranberry Juice", e: "Pineapple Juice", f: "Tomato Juice" },
            { text: "Type of Jam:", a: "Apricot Jam", b: "Raspberry Jam", c: "Blackberry Jam", d: "Peach Preserves", e: "Fig Jam", f: "Plum Jam" },
            { text: "Nut Butter:", a: "Peanut Butter", b: "Cashew Butter", c: "Almond Butter", d: "Hazelnut Spread", e: "Sunflower Butter", f: "Pistachio Butter" },
            { text: "Caffeine Source:", a: "Coffee", b: "Energy Drink", c: "Soda", d: "Green Tea", e: "Black Tea", f: "Chai" },
            { text: "Savory Pie:", a: "Quiche", b: "Pot Pie", c: "Shepherd's Pie", d: "Samosa", e: "Pastry Puff", f: "Hand Pie" },
            { text: "Salad Base:", a: "Romaine", b: "Spinach", c: "Arugula", d: "Iceberg", e: "Kale", f: "Mixed Greens" },
            { text: "Fermented Food:", a: "Yogurt", b: "Kefir", c: "Sauerkraut", d: "Kimchi", e: "Pickles", f: "Kombucha" },
            { text: "Grain Type:", a: "Oats", b: "Barley", c: "Rye", d: "Wheat", e: "Millet", f: "Spelt" },
            { text: "Dip Temperature:", a: "Hot Dip", b: "Cold Dip", c: "Room Temp Dip", d: "Baked Dip", e: "Chilled Spread", f: "Warmed Spread" },
            { text: "Cake Frosting:", a: "Buttercream", b: "Cream Cheese", c: "Fondant", d: "Ganache", e: "Glaze", f: "Whipped Cream" },
            { text: "Dough:", a: "Puff Pastry", b: "Shortcrust", c: "Filo", d: "Choux", e: "Yeasted Dough", f: "Biscuit Dough" },
            { text: "Vegetable Prep:", a: "Roasted", b: "Sautéed", c: "Blanched", d: "Pickled", e: "Raw", f: "Grilled" },
            { text: "Spice:", a: "Cumin", b: "Coriander", c: "Nutmeg", d: "Cardamom", e: "Star Anise", f: "Cloves" },
            { text: "Drink Garnish:", a: "Cherry", b: "Olive", c: "Lime Wedge", d: "Orange Peel", e: "Mint Sprig", f: "Sugar Rim" },
            { text: "Sweet Topping:", a: "Maple Syrup", b: "Agave Nectar", c: "Whipped Cream", d: "Powdered Sugar", e: "Chocolate Sauce", f: "Caramel Drizzle" },
            { text: "Mexican Food:", a: "Enchiladas", b: "Burrito", c: "Tostada", d: "Flautas", e: "Tamales", f: "Fajitas" },
            { text: "Aged Cheese:", a: "Parmesan", b: "Gouda", c: "Cheddar", d: "Gruyère", e: "Asiago", f: "Manchego" },
            { text: "Type of Roast:", a: "Pot Roast", b: "Prime Rib", c: "Loin Roast", d: "Shoulder Roast", e: "Leg of Lamb", f: "Pork Loin" },
            { text: "Quick Meal:", a: "Soup", b: "Sandwich", c: "Cereal", d: "Wrap", e: "Instant Noodles", f: "Leftovers" },
            { text: "Crunchy Snack:", a: "Pretzels", b: "Pita Chips", c: "Tortilla Chips", d: "Hard Tostada", e: "Bagel Chips", f: "Pork Rinds" },
            { text: "Fruit Texture:", a: "Crisp", b: "Mushy", c: "Juicy", d: "Fuzzy", e: "Smooth", f: "Seedy" },
            { text: "Coffee Roast:", a: "Light Roast", b: "Dark Roast", c: "Medium Roast", d: "Espresso Roast", e: "Blonde Roast", f: "French Roast" },
            { text: "Dessert Serving:", a: "A la mode", b: "Plain", c: "Whipped Cream", d: "Berry Coulis", e: "Dusting of Sugar", f: "Caramel Sauce" },
            { text: "Meat Temperature:", a: "Medium Rare", b: "Well Done", c: "Rare", d: "Medium", e: "Medium Well", f: "Blue" },
            { text: "Holiday Dessert:", a: "Pumpkin Pie", b: "Pecan Pie", c: "Fruitcake", d: "Yule Log", e: "Gingerbread", f: "Trifle" },
            { text: "Spice Mix:", a: "Curry Powder", b: "Garam Masala", c: "Chili Powder", d: "Five Spice", e: "Herbes de Provence", f: "Za'atar" },
            { text: "Condiment Temperature:", a: "Refrigerated", b: "Room Temp", c: "Warmed", d: "Chilled", e: "Hot", f: "Slightly Cool" },
            { text: "Type of Grill:", a: "Charcoal Grill", b: "Gas Grill", c: "Smoker", d: "Broiler", e: "Griddle", f: "Open Fire" },
            { text: "Sweet Vegetable:", a: "Corn", b: "Peas", c: "Bell Peppers", d: "Cherry Tomatoes", e: "Onions (cooked)", f: "Squash" },
            { text: "Fish Preparation:", a: "Baked Fish", b: "Pan-seared Fish", c: "Fried Fish", d: "Grilled Fish", e: "Poached Fish", f: "Smoked Fish" },
            { text: "Breakfast Pastry:", a: "Croissant", b: "Danish", c: "Muffin", d: "Bagel", e: "Toast", f: "Biscuit" },
            { text: "Drink Preference:", a: "Still Water", b: "Sparkling Water", c: "Tap Water", d: "Bottled Water", e: "Mineral Water", f: "Filtered Water" },
            { text: "Salad Crunch:", a: "Croutons", b: "Seeds", c: "Nuts", d: "Crispy Bacon", e: "Wonton Strips", f: "Fried Onions" },
            { text: "Savory Snack:", a: "Pepperoni Stick", b: "Jerky", c: "Cheese Cubes", d: "Hard Boiled Egg", e: "Salami Slice", f: "Pickled Asparagus" },
            { text: "Herbal Drink:", a: "Chamomile Tea", b: "Peppermint Tea", c: "Ginger Tea", d: "Hibiscus Tea", e: "Lemon Balm Tea", f: "Fennel Tea" },
            { text: "Asian Rice Dish:", a: "Fried Rice", b: "Steamed Rice", c: "Congee", d: "Biryani", e: "Nasi Goreng", f: "Sushi Rice" },
            { text: "Cabbage Dish:", a: "Coleslaw", b: "Sauerkraut", c: "Stuffed Cabbage", d: "Cabbage Soup", e: "Stir-fry Cabbage", f: "Kimchi" },
            { text: "Cooking Technique:", a: "Braise", b: "Stew", c: "Sear", d: "Reduce", e: "Deglaze", f: "Marinate" },
            { text: "Potato Topping:", a: "Sour Cream", b: "Chives", c: "Bacon Bits", d: "Cheese Sauce", e: "Butter", f: "Gravy" },
            { text: "Sweet/Savory:", a: "Sweet Breakfast", b: "Savory Breakfast", c: "Sweet Snack", d: "Savory Snack", e: "Sweet Dessert", f: "Savory Dessert" },
            { text: "Bread for Toast:", a: "White Bread", b: "Wheat Bread", c: "Multigrain", d: "Pumpernickel", e: "English Muffin", f: "Bagel" },
            { text: "Chocolate Type:", a: "Bar Chocolate", b: "Truffle", c: "Hot Chocolate", d: "Malt Ball", e: "Fudge", f: "Mousse" },
            { text: "Flavor Enhancer:", a: "Garlic", b: "Onion", c: "Shallots", d: "Leeks", e: "Ginger", f: "Chili" },
            { text: "Tropical Fruit:", a: "Papaya", b: "Kiwi", c: "Dragon Fruit", d: "Star Fruit", e: "Jackfruit", f: "Mangosteen" },
            { text: "Noodle Thickness:", a: "Thick Noodle", b: "Thin Noodle", c: "Wide Noodle", d: "Round Noodle", e: "Flat Noodle", f: "Twisted Noodle" },
            { text: "Crockpot Meal:", a: "Chili", b: "Roast", c: "Pulled Pork", d: "Beef Stew", e: "Chicken & Dumplings", f: "Taco Soup" },
            { text: "Ice Cream Style:", a: "Scooped Ice Cream", b: "Soft Serve", c: "Milkshake", d: "Sundae", e: "Ice Cream Cake", f: "Waffle Cone" }
        ];

        let currentQuestion = 0;
        
        // --- Speedrun and Timer Variables ---
        let startTime;
        let timerInterval;
        let isTimerRunning = false;
        const PB_KEY = 'quizSpeedrunPB'; // Key for local storage

        // --- Secret Logic Variables ---
        let secretClicks = 0;
        let secretActivated = false;

        // --- Helper Function for Time Formatting ---
        function formatTime(ms) {
            if (ms === Infinity) return "No PB Set";
            if (ms === 0) return "00:00.00";
            
            const totalSeconds = ms / 1000;
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = Math.floor(totalSeconds % 60);
            const milliseconds = Math.floor((ms % 1000) / 10); // show 2 digits for ms
            
            const minStr = String(minutes).padStart(2, '0');
            const secStr = String(seconds).padStart(2, '0');
            const msStr = String(milliseconds).padStart(2, '0');

            return `${minStr}:${secStr}.${msStr}`;
        }

        // --- Local Storage Functions ---
        function loadPB() {
            const savedPB = localStorage.getItem(PB_KEY);
            const pbDisplay = document.getElementById('pb-display');
            
            if (savedPB) {
                const pbTime = parseInt(savedPB);
                pbDisplay.textContent = `Personal Best: ${formatTime(pbTime)}`;
                return pbTime;
            } else {
                pbDisplay.textContent = "Personal Best: No PB Set";
                return Infinity;
            }
        }
        let personalBest = loadPB(); // Load PB on script start

        // --- Timer Functions ---
        function startTimer() {
            if (isTimerRunning) return;
            startTime = Date.now();
            isTimerRunning = true;
            timerInterval = setInterval(updateTimer, 10); // Update every 10ms for millisecond accuracy
        }

        function stopTimer() {
            if (!isTimerRunning) return 0;
            clearInterval(timerInterval);
            isTimerRunning = false;
            const elapsedTime = Date.now() - startTime;
            return elapsedTime;
        }

        function updateTimer() {
            if (!isTimerRunning) return;
            const currentTime = Date.now() - startTime;
            document.getElementById('timer-display').textContent = formatTime(currentTime);
        }

        // --- Quiz Logic ---
        function loadQuestion() {
            const q = questions[currentQuestion];
            document.getElementById('question').textContent = q.text;
            document.getElementById('opt-a').textContent = q.a;
            document.getElementById('opt-b').textContent = q.b;
            document.getElementById('opt-c').textContent = q.c;
            document.getElementById('opt-d').textContent = q.d;
            document.getElementById('opt-e').textContent = q.e;
            document.getElementById('opt-f').textContent = q.f;
            
            // Update progress bar
            const progressPct = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progress').style.width = progressPct + "%";
        }

        function checkSecret() {
            // Secret logic on Q1
            if (currentQuestion === 0 && questions[currentQuestion].text.includes("Friday Night Dinner")) {
                secretClicks++;
                
                if (secretClicks === 3) {
                    secretActivated = true;
                }
            }
        }

        function handleAnswer() {
            if (currentQuestion === 0) {
                // Start timer immediately after answering the FIRST question
                startTimer();
            }

            currentQuestion++;
            
            if (currentQuestion < questions.length) {
                loadQuestion();
            } else {
                const finalTime = stopTimer();
                showResult(finalTime);
            }
        }

        // --- Result and PB Logic ---
        function showResult(finalTime) {
            document.getElementById('quiz-box').classList.add('hidden');
            document.getElementById('result-container').classList.remove('hidden');

            const resultHeader = document.getElementById('result-percentage');
            const timeResult = document.getElementById('time-result');

            // Set final quiz result
            if (secretActivated) {
                resultHeader.textContent = "You are 0% Gay";
            } else {
                resultHeader.textContent = "You are 99.5% Gay";
            }
            
            // Display final time
            timeResult.textContent = `Time: ${formatTime(finalTime)}`;

            // Check and Save Personal Best (PB)
            if (finalTime < personalBest) {
                localStorage.setItem(PB_KEY, finalTime);
                timeResult.innerHTML += '<br><span class="pb-beaten">NEW PERSONAL BEST!</span>';
                triggerConfetti();
            } else {
                timeResult.innerHTML += `<br>PB to Beat: ${formatTime(personalBest)}`;
            }
        }

        // --- Confetti Effect (Simple Implementation) ---
        function triggerConfetti() {
            const container = document.getElementById('confetti-effect');
            container.classList.remove('hidden');
            const colors = [
                'var(--primary)', 
                'var(--secondary)', 
                'var(--color-c)', 
                'var(--color-e)',
                '#fff' // White confetti
            ];

            for (let i = 0; i < 50; i++) {
                const c = document.createElement('div');
                c.classList.add('confetti');
                c.style.left = `${Math.random() * 100}%`;
                c.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                c.style.animationDelay = `${Math.random() * 0.5}s`;
                c.style.animationDuration = `${2.5 + Math.random() * 1}s`;
                container.appendChild(c);
            }

            // Clean up confetti after animation
            setTimeout(() => {
                container.innerHTML = '';
                container.classList.add('hidden');
            }, 3500);
        }

        // Initialize
        loadQuestion();
    </script>

</body>
</html>
